<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Planify</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div class="app">
    <header>
      <div class="nav-buttons">
        <button id="prev">← Hier</button>
      </div>
      <div class="date-title" id="dateTitle">Date</div>
      <div class="nav-buttons">
        <button id="next">Demain →</button>
      </div>
    </header>

    <div class="calendar-wrap">
      <div class="times" id="timesCol"></div>
      <div class="grid" id="grid">
        <div class="slot-layer" id="slotLayer"></div>
      </div>
    </div>

    <div class="hint">Clique ou fais glisser sur la grille pour créer un créneau.</div>
  </div>

  <!-- Slot menu -->
<div class="side-menu" id="sideMenu">
  <button class="close-btn" id="closeMenu">×</button>
  <h2>Détails du créneau</h2>
  <div class="side-menu-content">
    <div id="slotInfo"></div>
    <div class="task-type-grid" id="taskTypeGrid">
      <h3>Préférences des types de tâches</h3>
    </div>
  </div>
  <div class="side-menu-footer">
    <button class="btn-primary" id="startExecutionBtn">Démarrer</button>
    <button class="btn-primary" id="emptySlotBtn">Vider</button>
    <button class="btn-danger" id="deleteSlotBtn" style="margin-bottom: 12px;">Supprimer</button>
  </div>
</div>

  <!-- Execution view -->
  <div class="execution-view" id="executionView">
    <button class="close-btn" id="closeExecutionBtn">×</button>
    <div class="execution-header">
      <h2 id="executionSlotName">Créneau</h2>
      <div class="execution-time">
        <span id="executionSlotTime">--:-- — --:--</span>
      </div>
    </div>
    <div class="execution-content">
      <div class="current-task-display">
        <div class="task-counter" id="taskCounter">Tâche 1/1</div>
        <h3 id="currentTaskName">Aucune tâche</h3>
        <div class="timer-display" id="timerDisplay">00:00</div>
      </div>
      <div class="execution-controls">
        <button class="btn-secondary" id="pauseBtn">Pause</button>
        <button class="btn-secondary" id="addTimeBtn">+5 min</button>
        <button class="btn-primary" id="nextTaskBtn">Tâche suivante</button>
      </div>
      <div class="tasks-list" id="executionTasksList">
      </div>
    </div>
  </div>

  <!-- Task panel -->
  <div class="task-panel" id="taskPanel">
    <h2>Gestion des tâches</h2>
    <div class="task-list" id="taskList"></div>
    <button class="add-task-btn" id="addTaskBtn">Créer une tâche</button>
    <button class="place-tasks-btn" id="placeTasksBtn">Placer les tâches</button>
    <button class="place-tasks-btn hidden" id="removePlacementTasksBtn">Retirer le placement</button>
    
    <!-- Loading animation -->
    <div class="algo-loading" id="algoLoading" style="display: none;">
      <div class="loading-spinner"></div>
      <div class="loading-elapsed">Temps écoulé : 0.0s</div>
      <div class="loading-text">
        Placement des tâches en cours<span class="loading-dots"></span>
      </div>
      <button class="btn-secondary" id="cancelAlgoBtn">Annuler</button>
    </div>
  </div>

  <!-- Task editor -->
  <div class="task-editor" id="taskEditor">
    <div class="task-editor-header">
      <h2 id="taskEditorTitle">Nouvelle tâche</h2>
      <button class="close-btn" id="closeTaskEditor">×</button>
    </div>
    <div class="task-editor-form">
      <div class="form-group">
        <label for="taskName">Nom de la tâche</label>
        <input type="text" id="taskName" placeholder="Entrez le nom de la tâche">
      </div>
      <div class="form-group">
        <label for="taskDuration">Durée (minutes)</label>
        <input type="number" id="taskDuration" placeholder="60" min="15" step="15">
      </div>
      <div class="form-group">
        <label for="taskType">Type</label>
        <select id="taskType"></select>
      </div>
      <div class="form-group">
        <label>Fragmentation</label>
        <div id="fragmentationContainer">
          <button class="btn-secondary" id="addFragmentationBtn" style="width: 100%;">Ajouter une fragmentation</button>
        </div>
      </div>
      <div class="form-group">
				<label for="taskBornline">Date et heure de début (bornline)</label>
				<div style="display: flex; gap: 8px; align-items: center;">
					<input type="date" id="taskBornline" style="flex: 1;" disabled>
					<input type="time" id="taskBornlineTime" style="flex: 1;" disabled>
					<button type="button" class="btn-secondary" id="toggleBornlineBtn" style="padding: 12px 16px; flex-shrink: 0; min-width: fit-content;">Activer</button>
				</div>
			</div>
			<div class="form-group">
				<label for="taskDeadline">Date et heure de fin (deadline)</label>
				<div style="display: flex; gap: 8px; align-items: center;">
					<input type="date" id="taskDeadline" style="flex: 1;" disabled>
					<input type="time" id="taskDeadlineTime" style="flex: 1;" disabled>
					<button type="button" class="btn-secondary" id="toggleDeadlineBtn" style="padding: 12px 16px; flex-shrink: 0; min-width: fit-content;">Activer</button>
				</div>
			</div>
			<div class="form-group">
				<button type="button" class="btn-secondary" id="toggleDoneBtn" style="width: 100%;">Marquer comme fait</button>
			</div>
      <div class="form-actions">
        <button class="btn-secondary" id="cancelTaskBtn">Annuler</button>
        <button class="btn-danger" id="deleteTaskBtn" style="display:none;">Supprimer</button>
        <button class="btn-primary" id="saveTaskBtn">Sauvegarder</button>
      </div>
    </div>
  </div>

  <!-- Settings panel -->
  <div class="settings-panel" id="settingsPanel">
    <button class="close-btn" id="closeSettingsPanel">×</button>
    <h2>Paramètres</h2>
    <div class="settings-content">
      <div class="settings-section">
        <h3>Types de tâches</h3>
        <div class="task-type-list" id="taskTypesList"></div>
        <button class="add-type-btn" id="addTypeBtn">Ajouter un type</button>
      </div>
    </div>
    <div class="settings-footer">
      <div class="import-buttons-container">
        <button class="import-preset-btn" id="importPresetBtn">Importer</button>
        <div class="import-menu" id="importMenu">
          <div class="import-menu-header">Importer une configuration</div>
          <div class="import-menu-items" id="importMenuItems"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating button -->
  <button class="floating-btn" id="openTaskPannelBtn">+</button>

  <!-- Settings button -->
  <button class="settings-btn" id="settingsBtn">⚙️</button>


  <script src="algo.js"></script>
  <script src="index.js"></script>
</body>
</html>